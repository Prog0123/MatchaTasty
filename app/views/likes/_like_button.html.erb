<% size ||= "md" %>
<% size_classes = size == "sm" ? "text-lg" : "text-2xl" %>

<div id="like-section-<%= review.id %>" class="like-button-wrapper inline-block">
  <% if user_signed_in? %>
    <% current_like = review.likes.find_by(user: current_user) %>
    
    <% if current_like %>
      <!-- ã„ã„ã­æ¸ˆã¿çŠ¶æ…‹ï¼ˆèµ¤ã„ãƒãƒ¼ãƒˆï¼‰ -->
      <%= button_to review_like_path(review, current_like),
          method: :delete,
          class: "like-btn like-btn-active flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-100 transition-colors",
          data: { turbo: true } do %>
        <span class="like-heart #{size_classes}">â¤ï¸</span>
        <span class="like-count font-semibold text-gray-700"><%= review.likes_count %></span>
      <% end %>
    <% else %>
      <!-- ã„ã„ã­ã—ã¦ã„ãªã„çŠ¶æ…‹ï¼ˆç™½ã„ãƒãƒ¼ãƒˆï¼‰ -->
      <%= button_to review_likes_path(review),
          method: :post,
          class: "like-btn like-btn-inactive flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-100 transition-colors",
          data: { turbo: true } do %>
        <span class="like-heart #{size_classes}">ğŸ¤</span>
        <span class="like-count font-semibold text-gray-700"><%= review.likes_count %></span>
      <% end %>
    <% end %>
  <% else %>
    <!-- ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ -->
    <%= button_to review_likes_path(review),
        method: :post,
        class: "like-btn like-btn-inactive flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-red-100 transition-colors",
        data: { turbo: false } do %>
      <span class="like-heart <%= size_classes %>">ğŸ¤</span>
      <span class="like-count font-semibold text-gray-700"><%= review.likes_count %></span>
    <% end %>
  <% end %>
</div>

<!-- ã‚¹ã‚¿ã‚¤ãƒ« -->
<style>
  .like-btn {
    border: none;
    background: transparent;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .like-btn:hover {
    transform: scale(1.05);
  }

  .like-btn-inactive:hover {
    background-color: rgba(254, 226, 226, 0.5);
  }

  .like-btn-active:hover {
    background-color: rgba(254, 226, 226, 0.8);
  }

  .like-heart {
    display: inline-block;
    transition: transform 0.2s ease;
  }

  .like-btn:hover .like-heart {
    transform: scale(1.1);
  }
</style>